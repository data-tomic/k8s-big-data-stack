# Используем тот же базовый образ, что и в чарте
FROM apachesuperset.docker.scarf.sh/apache/superset:4.1.2

# Переключаемся на пользователя root для установки пакетов
USER root

# Устанавливаем psycopg2-binary (он проще, так как не требует зависимостей для компиляции)
# Также обновляем pip и setuptools на всякий случай
RUN pip install --no-cache-dir --upgrade pip setuptools && \
    pip install --no-cache-dir psycopg2-binary

# Возвращаемся к пользователю, от которого работает Superset в базовом образе
# Если вы не знаете точно, какой это пользователь, можно посмотреть в Dockerfile базового образа
# или закомментировать эту строку и проверить, от какого пользователя запускается процесс.
# Часто это 'superset' или 'nobody'. Если сомневаетесь, пока можно закомментировать.
# USER superset
